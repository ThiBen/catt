\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{mathpartir}
\usepackage{macros}

\title{Id\'ee de modification}

\begin{document}
\maketitle

\section{Exemples de règles}
\subsection{Les r\`egles de structure du programe}
\[
\inferrule
    { }
    {
      \vdash \TCat
    }
\]

\[
\inferrule
    {
      \Gamma\vdash C:\TCat
    }
    {
      \Gamma\vdash\Hom\ C
    }
\]


\[
\inferrule
    {
      \Gamma\vdash C:\TCat
    }
    {
      \Gamma\vdash\True_C : \Hom\ C
    }
\]

\[
\inferrule
    {
    }
    {
      \vdash \False
    }
\]

\[
\inferrule
    {
      \Gamma \vdash C : \TCat
    }
    {
      \Gamma \vdash \T_C : \True_C
    }
\]

\[
\inferrule
    {
      \Gamma\vdash A : \Hom\ C \\
      \Gamma\vdash u : A \\
      \Gamma\vdash v : A
    }
    {
      \Gamma \vdash  x\ |\ a \to_C b\ |\ u \to_C v 
    }
\]


\subsection{Les règles pour les pasting schemes}
Ici, $*_a$ est un raccourci pour $ \True_C\ |\ a \to_C a$
\[
\inferrule
    {
      \Gamma\vdashps^C x : *_a 
    }
    {
      \Gamma\vdashps^c 
    }
\]

\[
\inferrule
    {
      \Gamma\vdashps^C x : A 
    }
    {
      \Gamma, y : A, f : A\ |\ x \to_C y\vdashps^c f : A\ |\ x \to_C y  
    }
\]

\[
\inferrule
    { }
    {
      a : \True_C, x : *_a \vdashps^c x : *_a 
    }
\]

\[
\inferrule
    {
      \Gamma\vdashps^C f : A\ |\ x \to_C y
    }
    {
      \Gamma\vdashps^c y : A  
    }
\]

\subsection{Les règles pour les cohérences}
\[
  \inferrule
  {
    \Delta\vdash C:\TCat\\
    \Gamma\vdashps^C\\
    C:\TCat,\Gamma\vdash A
   }
  {
    \Delta,\Gamma\vdash\coh:A
  }
\]
lorsque $\FV(A)=\set{C}\cup\FV(\Gamma)$

\[
  \inferrule
  {
    \Delta\vdash C:\TCat\\
    \Gamma\vdashps^C\\
    C:\TCat,\Gamma\vdash t\to_C u : \Type \\
    C:\TCat,\partial^-(\Gamma)\vdash t \\
    C:\TCat,\partial^+(\Gamma)\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to_C u
  }
\]
lorsque $\FV(t)=\set{C}\cup\FV(\partial^-(\Gamma))$ et $\FV(u)=\set{C}\cup\FV(\partial^+(\Gamma))$



\subsection{Les règles pour les foncteurs}
\[
  \inferrule
  {
    \Delta\vdash F:C\To D\\
    \Gamma\vdashps^C\\
    C:\TCat, D:\TCat, F:C\To D,\Gamma\vdash A :
   }
  {
    \Delta,\Gamma\vdash\coh:A
  }
\]
lorsque $\FV(A)=\FV{F}\cup\FV(\Gamma)$

\[
  \inferrule
  {
    \Delta\vdash F:C\To D\\
    \Gamma\vdashps^C\\
    \Gamma_F,\Gamma\vdash t\to_D u \\
    \Gamma_F,\partial^-(\Gamma)\vdash t \\
    \Gamma_F,\partial^+(\Gamma)\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to_Du
  }
\]
lorsque $\FV(t)=\FV(F)\cup\FV(\partial^-(\Gamma)) $ et $\FV(u)=\set{C,D,F}\cup\FV(\partial^+(\Gamma)$


\[
  \inferrule
  {
    \Delta\vdash F:C\To D\\
    \Gamma\vdashps^C\\
    \Gamma_F,\Gamma\vdash t\to_D u \\
    \Gamma_C,\Gamma\vdash t \\
    \Gamma_D,\Gamma\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to_Du
  }
\]

lorsque
$\FV(t) = \FV(C)\cup\FV(\Gamma)$ et $\FV(u) = \FV(D)\cup\FV(\Gamma)$  



\subsection{Les r\`egles pour les transformations naturelles}

\[
  \inferrule
  {
    \Delta\vdash \tau:C\To D|F \to G\\
    \Gamma\vdashps^C\\
    \Gamma_\tau,\Gamma\vdash A : \Type \ D
   }
  {
    \Delta,\Gamma\vdash\coh:A
  }
\]
lorsque $\FV(t\to^Du)=\set{C,D,F,G,\tau}\cup\FV(\Gamma)$

\[
  \inferrule
  {
    \Delta\vdash \tau:C\To D|F \to G\\
    \Gamma\vdashps^C\\
    \Gamma_\tau,\Gamma\vdash t\to^D u : \Type \ D \\
    \Gamma_\tau,\partial^-(\Gamma)\vdash t \\
    \Gamma_\tau,\partial^+(\Gamma)\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to^D u
  }
\]
lorsque $\FV(t)=\set{C,D,F,G,\tau}\cup\FV(\partial^-(\Gamma))$ et $\FV(u)=\set{C,D,F,G,\tau}\cup\FV(\partial^+(\Gamma))$

\[
  \inferrule
  {
    \Delta\vdash \tau:C\To D|F \to G\\
    (x : *C)\vdashps^C\\
    \Gamma_F,(x : *C)\vdash t\to^D u :  \Type \ D \\
    \Gamma_{\source (\tau)},(x : *C)\vdash t \\
    \Gamma_{\target(\tau)},(x : *C)\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to^D u
  }
\]
lorsque $\FV(t)=\FV(\source(\tau)) \cup\set{x}$ et $\FV(u)=\FV(\target(\tau)) \cup\set{x}$


\section {Synthèse}
\subsection{Les r\`egles de structure du programe}
\subsubsection{La catégorie des catégories}
\[
\inferrule
    {
    }
    {
      \vdash \False
    }
\]

\[
\inferrule
    {
    }
    {
      \vdash \TCat
    }
\]

\[
\inferrule
    {
      \Gamma\vdash\C:\TCat
    }
    {
      \vdash\Hom\ \C
    }
\]
    
\[
\inferrule
    {
      \Gamma\vdash\C:\TCat
    }
    {
      \Gamma\vdash\True_\C : \Hom\ \C
    }
\]

    
\[
\inferrule
    {
      \Gamma\vdash\C:\TCat
    }
    {
      \Gamma\vdash\T_\C : \True_\C
    }
\]


\[
\inferrule
    {
      \Gamma\vdash t: \Hom\ \C\\
      \Gamma\vdash a: t\\
      \Gamma\vdash b: t\\
    }
    {
      \Gamma\vdash t\ |\ a \to b
    }
\]

\subsubsection{Les catégories}
\[
\inferrule
    {
      \Gamma\vdash \C : \TCat\\
      \Gamma\vdash  C:\True_\C\ |\ \T_\C \to \T_\C
    }
    {
      \Gamma\vdash \Hom\ C
    }
\]
\[
\inferrule
    {
      \Gamma\vdash \C : \TCat\\
      \Gamma\vdash  C:\True_\C\ |\ \T_\C \to \T_\C
    }
    {
      \Gamma\vdash \True_C : \Hom\ C
    }
\]
\[
\inferrule
    {
      \Gamma\vdash \C : \TCat\\
      \Gamma\vdash  C:\True_\C\ |\ \T_\C \to \T_\C
    }
    {
      \Gamma\vdash \T_C : \True_C
    }
\]


\[
\inferrule
    {
      \Gamma\vdash \C : \TCat\\
      \Gamma\vdash  C:\True_\C\ |\ \T_\C \to \T_\C\\
      \Gamma\vdash t:\Hom\ C\\
      \Gamma\vdash a : t\\
      \Gamma\vdash b : t
    }
    {
      \Gamma\vdash t\ |\ a \to b : \Hom\ C
    }
\]

\subsection{Les règles pour les cohérences/foncteurs/...}
\subsubsection{Les règles pour le niveau -1}
\[
  \inferrule
  {
    \Delta\vdash\C : \TCat\\
    \Delta\vdash \True_\C\ |\ \T_\C\to \T_\C \\
    \Delta\vdash a : \True_C\\
    \Delta\vdash b : \True_C\\
    \Delta\vdash x : t\ |\ y \to z
  }
  {
    \Delta,\Gamma\vdash \im_{a \to b}(x) : \transf_{a\to b} .(t\ |\ y \to z)
  }
\]

Avec $\transf_{a \to b}.(t\ |\ y \to z)$ défini par induction :
\begin{align*}
&\transf_{a\to a}.(\True_C\ |\ a \to a) = (\True_C\ |\ a \to a)\\
&\transf_{a\to a}.(\True_C\ |\ \_ \to \_) = \mathsf{error}\\
&\transf_{a\to a}.(t\ |\ y \to z) = (\transf_{a\to a}.(t)\ |\ y \to z)\\ 
&\transf_{a \to b}.(\True_C\ |\ a \to a) = (\True_C\ |\ b \to b)\\
&\transf_{a \to b}.(\True_C\ |\ \_ \to \_) = \mathsf{error}\\
&\transf_{a \to b}.(t\ |\ y \to z) = (\transf_{a \to b}.(t)\ |\ \im_{a\to b} y \to \im_{a\to b} z)
\end{align*}

\subsubsection{Les règles pour les autres niveaux}
\[
  \inferrule
  {
    \Delta\vdash\C : \TCat\\
    \Delta\vdash C\to D : \Hom\ \C\\
    \Delta\vdash F:C\to D\\
    \Gamma\vdashps\\
    \Gamma_F,\Gamma\vdash A :
   }
  {
    \Delta,\Gamma\vdash\coh:A
  }
\]
lorsque $\FV(A)=\FV(F)\cup\FV(\Gamma)$

\[
  \inferrule
  {
    \Delta\vdash\C : \TCat\\
    \Delta\vdash C\to D : \Hom\ \C\\
    \Delta\vdash F:C\to D\\
    \Gamma\vdashps\\
    \Gamma_F,\Gamma\vdash t\to u\\
    \Gamma_F,\partial^-(\Gamma)\vdash t\\
    \Gamma_F,\partial^+(\Gamma)\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to u
  }
\]
lorsque $\FV(t)=\FV(F)\cup\FV(\partial^-(\Gamma)) $ et $\FV(u)=\FV(F)\cup\FV(\partial^+(\Gamma))$


\[
  \inferrule
  {
    \Delta\vdash\C : \TCat\\
    \Delta\vdash C\to D : \Hom\ \C\\
    \Delta\vdash F:C\to D\\
    \Gamma\vdashps\\
    \Gamma_F,\Gamma\vdash t\to_D u \\
    \Gamma_C,\Gamma\vdash t \\
    \Gamma_D,\Gamma\vdash u
  }
  {
    \Delta,\Gamma\vdash\coh:t\to_Du
  }
\]

lorsque
$\FV(t) = \FV(C)\cup\FV(\Gamma)$ et $\FV(u) = \FV(D)\cup\FV(\Gamma)$  




\end{document}
